<!doctype html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Rowan's 2nd Birthday Party</title>
        <style>
            :root {
                --primary: #fdc50d;
                --secondary: #007EA7;
                --text: #08080a;
            }

            body {
                background: var(--primary);
                color: var(--text);
                font-size: 24px;
            }

            * {
                font-weight: 600;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            #wrapper {
                display: block;
                max-width: 450px;
                width: 100%;
                padding: 24px;
                margin: 0 auto;
            }

            .card {
                display: block;
                width: 100%;
                overflow: hidden;
                position: relative;
                aspect-ratio: 1 / 1;
                border: 4px solid var(--text);
                margin-bottom: 48px;
            }

            .card img {
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                object-fit: cover;
            }

            h1 {
                font-size: 40px;
                font-weight: 800;
                text-align: center;
                margin-bottom: 32px;
            }

            span.accent {
                color: #631A86;
                font-weight: 800;
            }

            strong {
                background: var(--secondary);
                color: var(--text);
                border: 2px solid var(--text);
                padding: 12px;
                font-weight: 800;
                display: block;
                max-width: fit-content;
            }

            form {
                width: 100%;
                border: 4px solid var(--text);
                padding: 24px;
            }

            .card ~ p {
                margin-bottom: 48px;
            }

            form p {
                font-size: 16px;
                margin-bottom: 24px;
            }

            .form-control:not(:last-child) {
                margin-bottom: 18px;
            }

            label {
                font-weight: 800;
                font-size: 14px;
                display: block;
                margin-bottom: 8px;
            }

            input {
                font-size: 16px;
                width: 100%;
                display: block;
                padding: 8px 12px;
            }

            button {
                color: var(--text);
                font-size: 18px;
                padding: 8px 12px;
                background: var(--secondary);
                margin-left: auto;
                display: block;
                cursor: pointer;
                border: 2px solid var(--text);
            }

            .buckle-row {
                position: relative;
                height: 150px;
                padding: 12px;
                width: 150%;
                margin-left: -25%;
                overflow-x: hidden;
            }

            .buckle {
                width: 160px;
                position: absolute;
            }

            .buckle:first-child {
                width: 146px;
                left: 33%;
                top: 9px;
            }

            .buckle:last-child {
                right: 33%;

            }

            .buckle-row.animate .buckle:first-child {
                animation: 0.4s ease-in buckle_left;
            }

            .buckle-row.animate .buckle:last-child {
                animation: 0.4s ease-in buckle_right;
            }

            @keyframes buckle_left {
                0% {
                    transform: translateX(-100%);
                }

                100% {
                    transform: translateX(0);
                }
            }

            @keyframes buckle_right {
                0% {
                    transform: translateX(100%);
                }

                100% {
                    transform: translateX(0);
                }
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            <h1>“Buckle up! I'm <span class="accent">two</span>!”</h1>
            <div class="buckle-row">
                <div class="buckle">
                    <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.38 54.63"><rect x="1" y="4.3" width="11.98" height="46.03" transform="translate(13.98 54.63) rotate(-180)" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/><path d="M74.38,32.5v-10.37H24.58v-4.71h43.91v-6.54h-.19c-1.32-5.66-6.39-9.89-12.45-9.89s-11.13,4.22-12.45,9.89H24.58v-3.4H12.98V47.15h11.6v-3.4h18.82c1.32,5.66,6.39,9.89,12.45,9.89s11.13-4.22,12.45-9.89h.19v-6.54H24.58v-4.71h49.8Z" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/></svg>
                </div>
                <div class="buckle">
                    <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.69 51.13"><path d="M48.94,1c-1.43,8.24-8.59,14.52-17.24,14.52S15.88,9.24,14.46,1H1V50.13H14.46c1.43-8.24,8.59-14.52,17.24-14.52s15.82,6.28,17.24,14.52h20.76V1h-20.76Z" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/><rect x="69.7" y="2.55" width="11.98" height="46.03" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/></svg>
                </div>
            </div>
            <article class="card">
                <img src="/IMG_5446.jpg" alt="Rowan playing at the playground" />
            </article>
            <p>Rowan's favorite thing to do right now is play with buckles. Whether that's buckles on highchair, car seat, or an activity mat. If it can click, Rowan wants to buckle it. Join us as we celebrate Rowan's <span class="accent">2nd birthday</span>.
            <p><strong>Saturday, September 9th at 5:00pm</strong></p>
            <p>8234 N 167th Street<br />Bennington, NE 68007</p>
            <p>Light snacks and birthday treats will be provided</p>
            <p><strong>Please do not bring gifts. We just want to celebrate Rowan's 2nd year and thank each of you for helping us reach this milestone.</strong></p>

            <div class="buckle-row">
                <div class="buckle">
                    <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.38 54.63"><rect x="1" y="4.3" width="11.98" height="46.03" transform="translate(13.98 54.63) rotate(-180)" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/><path d="M74.38,32.5v-10.37H24.58v-4.71h43.91v-6.54h-.19c-1.32-5.66-6.39-9.89-12.45-9.89s-11.13,4.22-12.45,9.89H24.58v-3.4H12.98V47.15h11.6v-3.4h18.82c1.32,5.66,6.39,9.89,12.45,9.89s11.13-4.22,12.45-9.89h.19v-6.54H24.58v-4.71h49.8Z" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/></svg>
                </div>
                <div class="buckle">
                    <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.69 51.13"><path d="M48.94,1c-1.43,8.24-8.59,14.52-17.24,14.52S15.88,9.24,14.46,1H1V50.13H14.46c1.43-8.24,8.59-14.52,17.24-14.52s15.82,6.28,17.24,14.52h20.76V1h-20.76Z" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/><rect x="69.7" y="2.55" width="11.98" height="46.03" fill="#231f20" stroke="#fdc614" stroke-miterlimit="10" stroke-width="2"/></svg>
                </div>
            </div>

            <form id="rsvp">
                <div id="form-body">
                    <p>Want to make it click with us? Let us know you'll be there so we can have an accurate headcount.</p>
                    <div class="form-control">
                        <label for="family-name">Family Name</label>
                        <input type="text" id="family-name" name="family" autocomplete="family-name" />
                    </div>
                    <div class="form-control">
                        <label for="headcount">How many are coming with you (a guess is fine)?</label>
                        <input type="number" id="headcount" name="headcount" />
                    </div>
                    <button type="submit">Submit</button>
                </div>
            </form>
        </div>
        <script>
            (() => {
                document.getElementById('rsvp').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const headcount = e.target.headcount.value;
                    const family = e.target.family.value;

                    document.querySelector('form button').innerText = 'Submitting...';
                    document.querySelector('form button').disabled = true;

                    fetch('/.netlify/functions/notify', {
                        method: 'POST',
                        body: JSON.stringify({
                            headcount,
                            family
                        }),
                    }).then(() => {
                        document.getElementById('form-body').innerHTML = '<p>Thanks for letting us know. Excited to see you there!</p>';
                    })
                });

                // Only trigger buckle animation when a buckle row is in the viewport
                const buckleRows = document.querySelectorAll('.buckle-row');
                const buckleRowObserver = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate');
                        }
                    });
                }, {
                    threshold: 0.5
                });
                buckleRows.forEach((row) => {
                    buckleRowObserver.observe(row);
                });
            })();
        </script>
    </body>
</html>
